<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>UnPieChart - undoing crappy pie charts</title>
  <meta name="description" content="Reverse engineering of pie chart images.">
  <meta name="author" content="John Welford">
  <link rel="stylesheet" href="styles.css?v=1.0">
</head>

<body>
<h1>UnPieChart</h1>
<h2>Undoing crappy pie charts</h2>

<div id='dropZoneView' class='fill'>
  <div id='dropZone' tabindex=-1 data-error-message='That’s not an image'>
    <div id='intro'>
      <p>Pie charts are everywhere, but really <a href="http://www.perceptualedge.com/articles/visual_business_intelligence/save_the_pies_for_dessert.pdf">aren't a great way to deliver information</a>.</p>
      <div><blockquote>
        <p>Piecharts are the information visualization equivalent of a roofing hammer to the frontal lobe.
        They have no place in the world of grownups, and occupy the same semiotic space as short pants, a runny nose, and chocolate smeared on one’s face.
        They are as professional as a pair of assless chaps.
        Anyone who suggests their use should be instinctively slapped.</p>
      </blockquote></div>
      <div class='author'><a href="https://codahale.com/about/">Coda Hale</a></div>
      <p>Drag or paste a pie chart image here to convert it to a more useful set of data.</p>
    </div>
    <img id='image' class='pieImage'>
    <canvas id='greyscale' class='pieImage'></canvas>
    <canvas id='blur' class='pieImage'></canvas>
    <canvas id='edges' class='pieImage'></canvas>
    <canvas id='output' class='pieImage'></canvas>
    <canvas id='crop' class='pieImage'></canvas>
    <canvas id='segment' class='pieImage'></canvas>
    <canvas id='pieless' class='pieImage'></canvas>
    <canvas id='legend' class='pieImage'></canvas>
    <div id='chart' class='pieImage'></div>
  </div>
</div>

<button id="start">Stacked Bar</button>
<button id="reset">Pie</button>

<div>
  <table id="progressTable">
    <tr id='loadLibraries'>
      <td class='task'>Loading libraries...</td>
      <td><progress value='0'/></td>
    </tr>
    <tr id='findPie'>
      <td class='task'>Find pie</td>
      <td><progress value='0'/></td>
    </tr>
    <tr id='segmentPie'>
      <td class='task'>Find segments</td>
      <td><progress value='0'/></td>
    </tr>
    <tr id='findLegend'>
      <td class='task'>Find legend</td>
      <td><progress value='0'/></td>
    </tr>
  </table>
</div>

<table id="resultTable"></table>

<label for="processingDisplay">Show processing step:</label>
<select name="processingDisplay" id="processingDisplay">
  <!-- <option value="image">Original</option>
  <option value="greyscale">Greyscale</option>
  <option value="blur">Blur</option>
  <option value="edges">Edges</option>
  <option value="output">Detected circle</option>
  <option value="crop">Cropped</option>
  <option value="segment">Final segment</option>
  <option value="pieless">Remove Pie</option>
  <option value="legend">Segment legend</option>
  <option value="chart">Reproduce</option> -->
</select>

<script src="https://d3js.org/d3.v5.min.js"></script>
<script src='https://unpkg.com/tesseract.js@v2.0.0-alpha.11/dist/tesseract.min.js'></script>
<script async src="opencv.js" onload="onOpenCvReady();"></script>
<script src="process.js"></script>
<script src="imageProcess.js"></script>
<script src="segmentPie.js"></script>
<script src="extractText.js"></script>
<script src="newChart.js"></script>
</body>
</html>
